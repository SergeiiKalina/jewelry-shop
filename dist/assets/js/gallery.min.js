const GalleryClassName="gallery",GalleryLineClassName="gallery-line",GallerySlideClassName="gallery-slide";class Gallery{constructor(e,t=0){this.containerNode=e,this.size=e.childElementCount,this.currentSlide=0,this.currentSlideWasChanged=!1,this.manageHTML=this.manageHTML.bind(this),this.setParameter=this.setParameter.bind(this),this.setEvents=this.setEvents.bind(this),this.resizeGallery=this.resizeGallery.bind(this),this.startDrag=this.startDrag.bind(this),this.stopDrag=this.stopDrag.bind(this),this.dragging=this.dragging.bind(this),this.setStylePosition=this.setStylePosition.bind(this),this.manageHTML(),this.setParameter(),this.setEvents()}manageHTML(){this.containerNode.classList.add(GalleryClassName),this.containerNode.innerHTML=`
<div class="${GalleryLineClassName}">
${this.containerNode.innerHTML}</div>
`,this.lineNode=this.containerNode.querySelector("."+GalleryLineClassName),this.slideNodes=Array.from(this.lineNode.children).map(e=>wrapElementByDiv({element:e,className:GallerySlideClassName}))}setParameter(){var e=this.containerNode.getBoundingClientRect();console.log(this.containerNode),this.width=e.width,this.x=-this.currentSlide*this.width,this.lineNode.style.width=this.size*this.width+"px",Array.from(this.slideNodes).forEach(e=>{e.style.width=this.width+"px"})}setEvents(){this.debounceResizeGallery=debounce(this.resizeGallery),window.addEventListener("resize",this.debounceResizeGallery),this.lineNode.addEventListener("pointerdown",this.startDrag),window.addEventListener("pointerup",this.stopDrag)}destroyEvents(){window.removeEventListener("resize",this.debounceResizeGallery)}resizeGallery(){this.setParameter()}startDrag(e){this.currentSlideWasChanged=!1,this.clickX=e.pageX,this.startX=this.x,window.addEventListener("pointermove",this.dragging)}stopDrag(){window.removeEventListener("pointermove",this.dragging),this.x=-this.currentSlide*this.width,this.setStylePosition(),console.log(currentSlide)}dragging(e){this.dragX=e.pageX;e=this.dragX-this.clickX;this.x=this.startX+e,this.setStylePosition(e),5<e&&0<e&&!this.currentSlideWasChanged&&0<this.currentSlide&&(this.currentSlideWasChanged=!0,this.currentSlide=this.currentSlide-1),e<-5&&e<0&&!this.currentSlideWasChanged&&this.currentSlide<this.size-1&&(this.currentSlideWasChanged=!0,this.currentSlide=this.currentSlide+1)}setStylePosition(e){this.lineNode.style.transform=`translate3d(${this.x}px, 0, 0)`}}function wrapElementByDiv({element:e,className:t}){var i=document.createElement("div");return i.classList.add(t),e.parentNode.insertBefore(i,e),i.appendChild(e),i}function debounce(t,i=100){let s;return function(e){clearTimeout(s),s=setTimeout(t,i,e)}}