const mobileSumSubTotal=document.querySelector(".sum__mobile"),getSubTotalCost=e=>Number(e.value)*Number(e.dataset.price),totaPriceWrapper=document.querySelector(".basket_total_amount"),ACTION={PLUS:"plus",MINUS:"minus"},setTotalPrice=e=>{totaPriceWrapper.textContent=`$${e},00`,totaPriceWrapper.dataset.value=e,mobileSumSubTotal.textContent=`$${e},00`},init=()=>{let t=0;[...document.querySelectorAll(".basket_card_item")].forEach(e=>{t+=getSubTotalCost(e.querySelector(".card_quantity"))}),setTotalPrice(t)},calcSeparItem=(e,t)=>{var a=e.querySelector(".card_quantity");switch(t){case ACTION.PLUS:a.value++,setTotalPrice(Number(totaPriceWrapper.dataset.value)+Number(a.dataset.price));break;case ACTION.MINUS:a.value--,setTotalPrice(Number(totaPriceWrapper.dataset.value)-Number(a.dataset.price))}e.querySelector(".basket_card_price").textContent=`$${getSubTotalCost(a)},00`},cardBlock=(console.log(document.querySelector(".cards_body_block")),document.querySelector(".cards_body_block").addEventListener("click",e=>{var t;e.target.classList.contains("minus")&&(t=e.target.closest(".basket_card_item").querySelector(".card_quantity"),0!==Number(t.value))&&calcSeparItem(e.target.closest(".basket_card_item"),ACTION.MINUS),e.target.classList.contains("plus")&&calcSeparItem(e.target.closest(".basket_card_item"),ACTION.PLUS)}),document.querySelector(".cards_body_block")),basketcardQuantity=(cardBlock.addEventListener("click",e=>{var t,a;"card_block_hidden"==e.target.className&&(a=(t=(e=e.target.closest(".basket_card_item")).querySelector(".card_quantity")).value,e.remove(),updateStorege(),setTotalPrice(Number(totaPriceWrapper.dataset.value)-Number(t.dataset.price)*Number(a)))}),document.querySelector(".basket_quantity")),mobileCardQuantity=document.querySelector(".veiw__card_quantity span"),pricequantity=()=>{var e=document.querySelector(".block__cards").children.length;0<(basketcardQuantity.textContent=e)?basketcardQuantity.classList.add("activ"):basketcardQuantity.classList.remove("activ")},initialState=()=>{null!==localStorage.getItem("product")&&(document.querySelector(".block__cards").innerHTML=localStorage.getItem("product"),pricequantity())},updateStorege=(initialState(),()=>{let e=document.querySelector(".block__cards").innerHTML;(e=e.trim()).length?localStorage.setItem("product",e):localStorage.removeItem("product")});init();