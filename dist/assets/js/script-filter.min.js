const basketcardQuantity=document.querySelector(".basket_quantity"),productBtn=document.querySelectorAll(".product__hover button"),cardProductList=document.querySelector(".cards_body_block"),basketcard=document.querySelector(".basket"),menu=document.getElementById("menu"),burger=document.querySelector(".menu__icon"),listItem=document.querySelectorAll(".target"),header=document.querySelector(".filter__header"),headBasket=document.querySelector(".head_card"),head=document.querySelector(".header__block"),subMenu=document.querySelector(".menu__sublist_block"),shop=document.getElementById("shop"),basket=document.querySelector(".basket"),randomId=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),generateCardProduct=(e,t,a,c,r,s)=>`
    <div class="basket_card_item" data-id="${c}">
    <div class="basket_card_img"><img src="${e}" alt="" width='136' hight='136'></div>
    <div class="basket_card_nameandvalue">
    <div class="basket_card_value">
        <div class="basket_card_name">${t}</div>
        <div class="basket_card_params">Black / Medium</div>
        <div class="basket_card_price">${a}</div>
    </div>
    <div class="basket-card_quantity">
    <div class="bag_qty">QTY:</div>
        <button class="card_button minus">-</button>
        <input type="number" value="${s}" class="card_quantity" data-price="${r}" disabled></input>
        <button class="card_button plus">+</button>
    </div></div>
    <div class="card_block_hidden">âœ–</div>
    </div>
    `,bagQuntity=document.querySelector(".bag_footer_itemquantity span"),bagHeadquntity=document.querySelector(".bag_quantity_item"),pricequantity=(console.log(),()=>{var e=document.querySelector(".block__cards").children.length;basketcardQuantity.textContent=e,bagQuntity.textContent=`(${e} items)`,bagHeadquntity.textContent=e+" items",0<e?basketcardQuantity.classList.add("activ"):basketcardQuantity.classList.remove("activ")}),initialState=()=>{null!==localStorage.getItem("product")&&(document.querySelector(".block__cards").innerHTML=localStorage.getItem("product"),pricequantity())},updateStorege=(initialState(),()=>{let e=document.querySelector(".block__cards").innerHTML;(e=e.trim()).length?localStorage.setItem("product",e):localStorage.removeItem("product")}),bag=(productBtn.forEach(e=>{e.closest(".product_block_item").setAttribute("data-id",randomId()),e.addEventListener("click",e=>{e.preventDefault();var e=e.currentTarget,t=e.closest(".product_block_item"),a=t.dataset.id,c=t.querySelector(".product__block_img img").getAttribute("src"),r=t.querySelector(".product_block_item_name").textContent,s=t.querySelector(".product_block_item_price").textContent,o=t.dataset.price,t=t.querySelector(".card_quantity").value;document.querySelector(".block__cards").insertAdjacentHTML("afterbegin",generateCardProduct(c,r,s,a,o,t)),pricequantity(),updateStorege(),e.disabled=!0})}),document.querySelector(".basket")),bagBlock=document.querySelector(".bag"),bagItem=(document.addEventListener("click",e=>{e=e.target;e.closest(".fuck_basket")?bagBlock.classList.add("activ"):e.closest(".card_block_hidden")||e.closest(".bag")||bagBlock.classList.remove("activ")}),document.querySelector(".block__cards")),getSubTotalCost=(bagItem.addEventListener("click",e=>{"card_block_hidden"==e.target.className&&(e.target.closest(".basket_card_item").remove(),updateStorege(),pricequantity())}),e=>Number(e.value)*Number(e.dataset.price)),totaPriceWrapper=document.querySelector(".bag_footer_totalcost"),ACTION={PLUS:"plus",MINUS:"minus"},setTotalPrice=e=>{totaPriceWrapper.textContent=`$${e},00`,totaPriceWrapper.dataset.value=e},init=()=>{let t=0;[...document.querySelectorAll(".basket_card_item")].forEach(e=>{t+=getSubTotalCost(e.querySelector(".card_quantity"))}),setTotalPrice(t)},calcSeparItem=(e,t)=>{var a=e.querySelector(".card_quantity");switch(t){case ACTION.PLUS:a.value++,setTotalPrice(Number(totaPriceWrapper.dataset.value)+Number(a.dataset.price));break;case ACTION.MINUS:a.value--,setTotalPrice(Number(totaPriceWrapper.dataset.value)-Number(a.dataset.price))}e.querySelector(".basket_card_price").textContent=`$${getSubTotalCost(a)},00`};document.querySelector(".block__cards").addEventListener("click",e=>{var t;e.target.classList.contains("minus")&&(t=e.target.closest(".basket_card_item").querySelector(".card_quantity"),0!==Number(t.value))&&calcSeparItem(e.target.closest(".basket_card_item"),ACTION.MINUS),e.target.classList.contains("plus")&&calcSeparItem(e.target.closest(".basket_card_item"),ACTION.PLUS)}),document.querySelector(".fuck_basket").addEventListener("click",init()),document.addEventListener("click",e=>{e=e.target;e.closest(".menu__sublist")?(header.classList.add("activ"),subMenu.classList.add("activ"),head.classList.add("activ"),shop.classList.add("activ")):e.closest(".menu__sublist_block")||e.closest(".menu__sublist_block")||(header.classList.remove("activ"),subMenu.classList.remove("activ"),head.classList.remove("activ"),shop.classList.remove("activ"))}),menu.addEventListener("click",e=>{for(var t of listItem)t.classList.remove("underline");var a=e.target;"SPAN"==e.target.tagName&&a.classList.add("underline")}),document.addEventListener("click",e=>{if("SPAN"!=e.target.tagName)for(var t of listItem)t.classList.remove("underline")}),burger.addEventListener("click",()=>{var e=document.querySelector(".menu__body");document.body.classList.toggle("lock"),e.classList.toggle("hidden"),burger.classList.toggle("activ"),e.classList.toggle("activ")});