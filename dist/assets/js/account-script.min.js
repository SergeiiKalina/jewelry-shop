const btnAccount=document.querySelectorAll(".account_tabs_item"),bag=(btnAccount.forEach(r=>{r.addEventListener("click",t=>{btnAccount.forEach(t=>t.classList.remove("activ")),t.preventDefault();var t=t.target,e=(r.classList.add("activ"),document.querySelector(".register")),a=document.querySelector(".singin");t.closest(".singin_tab")&&(e.classList.remove("activ"),a.classList.add("activ")),t.closest(".register_tab")&&(a.classList.remove("activ"),e.classList.add("activ"))})}),document.querySelector(".account_tabs_item")&&document.querySelector(".account_tabs_item").click(),document.querySelector(".basket")),bagBlock=document.querySelector(".bag"),basketcardQuantity=(document.addEventListener("click",t=>{t=t.target;t.closest(".fuck_basket")?bagBlock.classList.add("activ"):t.closest(".card_block_hidden")||t.closest(".bag")||bagBlock.classList.remove("activ")}),document.querySelector(".basket_quantity")),bagQuntity=document.querySelector(".bag_footer_itemquantity span"),bagHeadquntity=document.querySelector(".bag_quantity_item"),pricequantity=()=>{var t=document.querySelector(".block__cards").children.length;basketcardQuantity.textContent=t,bagQuntity.textContent=`(${t} items)`,bagHeadquntity.textContent=t+" items",0<t?basketcardQuantity.classList.add("activ"):basketcardQuantity.classList.remove("activ")},bagItem=document.querySelector(".block__cards"),initialState=(bagItem.addEventListener("click",t=>{"card_block_hidden"==t.target.className&&(t.target.closest(".basket_card_item").remove(),updateStorege(),pricequantity())}),()=>{null!==localStorage.getItem("product")&&(document.querySelector(".block__cards").innerHTML=localStorage.getItem("product"),pricequantity())}),getSubTotalCost=(initialState(),t=>Number(t.value)*Number(t.dataset.price)),totaPriceWrapper=document.querySelector(".bag_footer_totalcost"),ACTION={PLUS:"plus",MINUS:"minus"},setTotalPrice=t=>{totaPriceWrapper.textContent=`$${t},00`,totaPriceWrapper.dataset.value=t},init=()=>{let e=0;[...document.querySelectorAll(".basket_card_item")].forEach(t=>{e+=getSubTotalCost(t.querySelector(".card_quantity"))}),setTotalPrice(e)},calcSeparItem=(t,e)=>{var a=t.querySelector(".card_quantity");switch(e){case ACTION.PLUS:a.value++,a.value=a.value,setTotalPrice(Number(totaPriceWrapper.dataset.value)+Number(a.dataset.price));break;case ACTION.MINUS:a.value--,setTotalPrice(Number(totaPriceWrapper.dataset.value)-Number(a.dataset.price))}t.querySelector(".basket_card_price").textContent=`$${getSubTotalCost(a)},00`},searchButton=(document.querySelector(".block__cards").addEventListener("click",t=>{var e;t.target.classList.contains("minus")&&(e=t.target.closest(".basket_card_item").querySelector(".card_quantity"),0!==Number(e.value))&&calcSeparItem(t.target.closest(".basket_card_item"),ACTION.MINUS),t.target.classList.contains("plus")&&calcSeparItem(t.target.closest(".basket_card_item"),ACTION.PLUS)}),document.querySelector(".search__img"));function generatorCode(t){return`
    <table>
                                <tr>
                                    <th>Name</th>
                                </tr>
                                <tr>
                                    <th>Surname</th>
                                </tr>
                                <tr>
                                    <th>City</th>
                                </tr>
                                <tr>
                                    <th>Street</th>
                                </tr>
                                <tr>
                                    <th>Post Index</th>
                                </tr>
                                <tr>
                                    <th>Tel</th>
                                </tr>
                                <tr>
                                    <th>Email</th>
                                </tr>
                            </table>
                            <table>
                                <tr>
                                    <td>${t[0].name.firstname}</td>
                                </tr>
                                <tr>
                                    <td>${t[0].name.lastname}</td>
                                </tr>
                                <tr>
                                    <td>${t[0].address.city}</td>
                                </tr>
                                <tr>
                                    <td>${t[0].address.street}</td>
                                </tr>
                                <tr>
                                    <td>${t[0].address.number}</td>
                                </tr>
                                <tr>
                                    <td>${t[0].phone}</td>
                                </tr>
                                <tr>
                                    <td>${t[0].email}</td>
                                </tr>
                            </table>
    `}searchButton.addEventListener("click",()=>{document.querySelector(".search_block").classList.toggle("activ")});let singin=document.querySelector("#singin");async function loadData(t,e,a){await function(t,e,a,r,c){var s={};for(var o in Object.keys(t))t[o][e]===a&&t[o][r]===c&&(s[o]=Object.assign({},t[o]));localStorage.removeItem("user");let i=generatorCode(s);(i=i.trim()).length&&localStorage.setItem("user",i)}(await(await fetch(t)).json(),"email",e,"password",a)}singin.addEventListener("click",function(t){loadData("https://fakestoreapi.com/users",document.querySelector("#login-email").value,document.querySelector("#login-pass").value)}),document.querySelector(".fuck_basket").addEventListener("click",init());